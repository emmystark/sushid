"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1282],{16093:function(e,t,i){i.d(t,{$s:function(){return s},Ch:function(){return x},Ll:function(){return d},Lw:function(){return c},Nx:function(){return u},ZP:function(){return m},kf:function(){return o},xN:function(){return h}}),i(77767);var n=i(95799),l=i(53003),r=i(34800),a=i(4470);let o=e=>e instanceof r.SushiSwapV2Pool,s=(e,t)=>new l.Token({chainId:e,address:t.rewardToken.address,symbol:t.rewardToken.symbol,decimals:t.rewardToken.decimals});function d(e,t,i){if(e&&t&&"number"==typeof i)return(0,r.tickToPrice)(e,t,i)}function c(e,t,i,a){let o;if(!e||!t||!i||!a)return;let s=function(e,t,i){var n;if(!e||!t||!i||!i.match(/^\d*\.?\d+$/))return;let[r,a]=i.split("."),o=null!==(n=null==a?void 0:a.length)&&void 0!==n?n:0,s=BigInt((null!=r?r:"")+(null!=a?a:""));return new l.Price(e,t,BigInt(10**o)*BigInt(10**e.decimals),s*BigInt(10**t.decimals))}(e,t,a);if(!s)return;let d=(0,r.encodeSqrtRatioX96)(s.numerator,s.denominator);return o=d>=r.TickMath.MAX_SQRT_RATIO?r.TickMath.MAX_TICK:d<=r.TickMath.MIN_SQRT_RATIO?r.TickMath.MIN_TICK:(0,r.priceToClosestTick)(s),(0,r.nearestUsableTick)(o,n.TICK_SPACINGS[i])}function u(e){if(!e)return{};let t=e.amount0.currency,i=e.amount1.currency,n=e.amount0.currency.chainId;return[l.DAI[n],l.USDC[n],l.USDT[n]].some(e=>null==e?void 0:e.equals(t))||[l.Native.onChain(n).wrapped,l.WBTC[n]].some(e=>null==e?void 0:e.equals(i))||e.token0PriceUpper.lessThan(1)?{priceLower:e.token0PriceUpper.invert(),priceUpper:e.token0PriceLower.invert(),quote:t,base:i}:{priceLower:e.token0PriceLower,priceUpper:e.token0PriceUpper,quote:i,base:t}}function m(e,t,i,n,l,a){let o={...i},s=[];for(let i=l+(a?1:-1);a?i<n.length:i>=0;a?i++:i--){let l=Number(n[i].tickIdx),d={liquidityActive:o.liquidityActive,tick:l,liquidityNet:n[i].liquidityNet,price0:(0,r.tickToPrice)(e,t,l).toFixed(8)};a?d.liquidityActive=o.liquidityActive+n[i].liquidityNet:a||0n===o.liquidityNet||(d.liquidityActive=o.liquidityActive-o.liquidityNet),s.push(d),o=d}return a||(s=s.reverse()),s}function x(e){let{price:t,atLimit:i,direction:n,placeholder:l}=e;return i[n]?n===a.Mb.LOWER?"0":"∞":t||void 0===l?null==t?void 0:t.toSignificant(6):l}let h=e=>{let{start:t,end:i,amount:n,token:r}=e;return(0,l.tryParseAmount)((n/((i-t)/3600/24)).toFixed(8),r)}},68646:function(e,t,i){i.d(t,{OW:function(){return n.O},no:function(){return l.n}});var n=i(30255),l=i(29507);i(15522)},30255:function(e,t,i){i.d(t,{O:function(){return u}});var n=i(70312),l=i(73620),r=i(95799),a=i(34800),o=i(16093),s=i(15522);let d=(e,t)=>void 0!==e&&t?Math.floor(e/r.TICK_SPACINGS[t])*r.TICK_SPACINGS[t]:void 0,c=e=>{let{token0:t,token1:i,feeAmount:n,chainId:l}=e;return(0,s.g)({token0:t,token1:i,feeAmount:n,chainId:l})},u=e=>{let{token0:t,token1:i,feeAmount:r,chainId:s,enabled:u=!0}=e,{data:m,isLoading:x}=(0,n.je_)({chainId:s,token0:t,token1:i,feeAmount:r,enabled:u}),h=(0,l.useMemo)(()=>d(null==m?void 0:m.tickCurrent,r),[m,r]),{isLoading:p,error:g,data:y}=c({token0:t,token1:i,feeAmount:r,chainId:s});return(0,l.useMemo)(()=>{var e;if(!t||!i||void 0===h||!m||!y||0===y.length||p)return{isLoading:p||x,error:g,activeTick:h,data:void 0};let n=t.wrapped,l=i.wrapped,r=y.findIndex(e=>{let{tickIdx:t}=e;return t>h})-1;if(r<0)return console.error("TickData pivot not found"),{isLoading:p,error:g,activeTick:h,data:void 0};let s={liquidityActive:null!==(e=BigInt(null==m?void 0:m.liquidity.toString()))&&void 0!==e?e:0n,tick:h,liquidityNet:Number(y[r].tickIdx)===h?y[r].liquidityNet:0n,price0:(0,a.tickToPrice)(n,l,h).toFixed(8)},d=(0,o.ZP)(n,l,s,y,r,!0);return{isLoading:p,error:g,activeTick:h,data:(0,o.ZP)(n,l,s,y,r,!1).concat(s).concat(d)}},[t,i,h,m,y,p,g,x])}},341:function(e,t,i){i.d(t,{l:function(){return _}});var n=i(13898),l=i(99823),r=i(73620);let a=r.forwardRef(function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))});var o=i(94396),s=i(43981),d=i.n(s),c=i(2321),u=i(61893),m=i(29262),x=i(73612),h=i(70312),p=i(66581),g=i(51242),y=i(95799),v=i(4470),f=i(98837),b=i(49372),j=i(90305),N=i(92578),w=i(8783),k=i(47365),C=i(70987),S=i(26676),T=i(82562),q=i(27967),I=i(22335),P=i(53003),A=i(34800),M=i(60426);let R=e=>{let{chainId:t,feeAmount:i,token0:l,token1:a,input0:o,input1:s,children:d,noLiquidity:c,position:m,existingPosition:p,price:g,pricesAtTicks:R,ticksAtLimit:L,tokenId:_,onSuccess:E,successLink:F}=e,{address:U,chain:K}=(0,h.mAM)(),{data:D}=(0,h.$hE)({storageKey:b.TTLStorageKey.AddLiquidity,chainId:t}),[z]=(0,q.o)(b.SlippageToleranceStorageKey.AddLiquidity),{[v.Mb.LOWER]:W,[v.Mb.UPPER]:V}=R,Y=(0,h.t_S)(),B=l&&a&&l.wrapped.sortsBefore(a.wrapped),O=(0,r.useMemo)(()=>B?W:null==V?void 0:V.invert(),[B,W,V]),H=(0,r.useMemo)(()=>B?V:null==W?void 0:W.invert(),[B,W,V]),$=(0,r.useMemo)(()=>B?g:null==g?void 0:g.invert(),[B,g]),Z=!!(L[v.Mb.LOWER]&&L[v.Mb.UPPER]),[X,G]=(0,r.useMemo)(()=>{if(!$||!l||!a||!O||!H)return[0,0];let e=+(null==O?void 0:O.toFixed(4)),t=+(null==$?void 0:$.toFixed(4));return[(e-t)/t*100,(+(null==H?void 0:H.toFixed(4))-t)/t*100]},[O,$,H,l,a]),Q=(0,r.useMemo)(()=>[(0,P.tryParseAmount)("1",l),(0,P.tryParseAmount)("1",a)],[l,a]),J=(0,T.Mu)({chainId:t,amounts:Q}),ee=!!p,et=(0,r.useCallback)(e=>{if(E(),!l||!a)return;let i=new Date().getTime();(0,S.Yz)({account:U,type:"mint",chainId:t,txHash:e,promise:Y.waitForTransactionReceipt({hash:e}),summary:{pending:c?"Creating the ".concat(l.symbol,"/").concat(a.symbol," liquidity pool"):"Adding liquidity to the ".concat(l.symbol,"/").concat(a.symbol," pair"),completed:c?"Created the ".concat(l.symbol,"/").concat(a.symbol," liquidity pool"):"Successfully added liquidity to the ".concat(l.symbol,"/").concat(a.symbol," pair"),failed:c?"Something went wrong when trying to create the pool":"Something went wrong when adding liquidity"},timestamp:i,groupTimestamp:i})},[E,l,a,U,t,Y,c]),ei=(0,r.useCallback)(e=>{e instanceof M.ab&&(0,S.rv)(null==e?void 0:e.message,!0)},[]),en=(0,r.useMemo)(()=>{if(!t||!U||!l||!a||!(0,y.isSushiSwapV3ChainId)(t)||!m||!D)return;let e=l.isNative?l:a.isNative?a:void 0,{calldata:i,value:n}=ee&&_?A.NonfungiblePositionManager.addCallParameters(m,{tokenId:_,slippageTolerance:z,deadline:D.toString(),useNative:e}):A.NonfungiblePositionManager.addCallParameters(m,{slippageTolerance:z,recipient:U,deadline:D.toString(),useNative:e,createPool:c});return{to:(0,h.j4z)(t).address,account:U,chainId:t,data:i,value:BigInt(n)}},[U,t,D,ee,c,m,z,l,a,_]),{isError:el}=(0,h.W7t)({...en,query:{enabled:!!(en&&t===(null==K?void 0:K.id))}}),{sendTransactionAsync:er,isLoading:ea,data:eo}=(0,h.pQX)({mutation:{onSuccess:et,onError:ei}}),es=(0,r.useMemo)(()=>{if(en&&!el)return async e=>{try{await er(en),e()}catch(e){}}},[er,el,en]),{status:ed}=(0,h.AhJ)({chainId:t,hash:eo});return(0,n.jsxs)(u.DialogProvider,{children:[(0,n.jsx)(u.DialogReview,{children:e=>{var r;let{confirm:m}=e;return(0,n.jsxs)(n.Fragment,{children:[d,(0,n.jsxs)(u.DialogContent,{children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)(u.DialogHeader,{children:[(0,n.jsxs)(u.DialogTitle,{children:[null==l?void 0:l.symbol,"/",null==a?void 0:a.symbol]}),(0,n.jsxs)(u.DialogDescription,{children:[" ",c?"Create liquidity pool":"Add liquidity"]})]}),(0,n.jsx)(j.SettingsOverlay,{options:{slippageTolerance:{storageKey:b.SlippageToleranceStorageKey.AddLiquidity,defaultValue:"0.1",title:"Add Liquidity Slippage"},transactionDeadline:{storageKey:b.TTLStorageKey.AddLiquidity,defaultValue:(0,h.j_p)(t).toString()}},modules:[j.SettingsModule.SlippageTolerance,j.SettingsModule.TransactionDeadline],children:(0,n.jsx)(N.h,{name:"Settings",icon:f.Z,variant:"secondary",className:"mr-12"})})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)(w.a,{className:"!pt-0",children:(0,n.jsxs)(w.a.Control,{children:[(0,n.jsx)(w.a.KeyValue,{flex:!0,title:"Network",children:null===(r=I.Chain.from(t))||void 0===r?void 0:r.name}),i&&(0,n.jsx)(w.a.KeyValue,{title:"Fee Tier",children:"".concat(+i/1e4,"%")})]})}),(0,n.jsx)(w.a,{className:"!pt-0",children:(0,n.jsxs)(w.a.Control,{children:[(0,n.jsx)(w.a.KeyValue,{flex:!0,title:"Minimum Price",subtitle:"Your position will be 100% composed of ".concat(null==o?void 0:o.currency.symbol," at this price"),children:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[Z?"0":null==O?void 0:O.toSignificant(6)," ",null==a?void 0:a.symbol,Z?"":(0,n.jsxs)("span",{className:"text-xs text-gray-500 dark:text-slate-400 text-slate-600",children:["$",(J[0]*(1+ +(X||0)/100)).toFixed(2)," ","(",X.toFixed(2),"%)"]})]})}),(0,n.jsx)(w.a.KeyValue,{flex:!0,title:c?"Starting Price":"Market Price",subtitle:c?"Starting price as determined by you":"Current price as determined by the ratio of the pool",children:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[null==$?void 0:$.toSignificant(6)," ",null==a?void 0:a.symbol,(0,n.jsxs)("span",{className:"text-xs text-gray-500 dark:text-slate-400 text-slate-600",children:["$",J[0].toFixed(2)]})]})}),(0,n.jsx)(w.a.KeyValue,{flex:!0,title:"Maximum Price",subtitle:"Your position will be 100% composed of ".concat(null==a?void 0:a.symbol," at this price"),children:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[Z?"∞":null==H?void 0:H.toSignificant(6)," ",null==a?void 0:a.symbol,Z?"":(0,n.jsxs)("span",{className:"text-xs text-gray-500 dark:text-slate-400 text-slate-600",children:["$",(J[0]*(1+ +(G||0)/100)).toFixed(2)," ","(",G.toFixed(2),"%)"]})," "]})})," ",(0,n.jsxs)(w.a.KeyValue,{flex:!0,title:"Slippage",children:[z.toSignificant(2),"%"]})]})}),(0,n.jsx)(w.a,{className:"!pt-0",children:(0,n.jsxs)(w.a.Control,{children:[o&&(0,n.jsx)(w.a.KeyValue,{flex:!0,title:"".concat(null==o?void 0:o.currency.symbol),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(k.F.Icon,{currency:o.currency,width:18,height:18}),null==o?void 0:o.toSignificant(6)," ",null==o?void 0:o.currency.symbol]})}),s&&(0,n.jsx)(w.a.KeyValue,{flex:!0,title:"".concat(null==s?void 0:s.currency.symbol),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(k.F.Icon,{currency:s.currency,width:18,height:18}),null==s?void 0:s.toSignificant(6)," ",null==s?void 0:s.currency.symbol]})})]})})]}),(0,n.jsx)(u.DialogFooter,{children:(0,n.jsx)(x.zx,{size:"xl",fullWidth:!0,loading:!es||ea,onClick:()=>null==es?void 0:es(m),disabled:el,testId:"confirm-add-liquidity",type:"button",children:el?"Shoot! Something went wrong :(":ea?(0,n.jsx)(C.b,{children:"Confirm Add"}):"Add Liquidity"})})]})]})}}),(0,n.jsx)(u.DialogConfirm,{chainId:t,status:ed,testId:"add-concentrated-liquidity-confirmation-modal",successMessage:"You successfully added liquidity to the ".concat(null==l?void 0:l.symbol,"/").concat(null==a?void 0:a.symbol," pair"),txHash:eo,buttonLink:F,buttonText:"View your position"})]})};var L=i(37243);let _=e=>{var t,i;let{chainId:s,account:f,feeAmount:b,token0:j,token1:N,setToken0:w,setToken1:k,tokensLoading:C,tokenId:S,existingPosition:T,onChange:q,successLink:I,withTitleAndDescription:P=!0}=e,{onFieldAInput:A,onFieldBInput:M}=(0,L.d5)(),{independentField:_,typedValue:E}=(0,L.fv)(),{data:F,isInitialLoading:U}=(0,h.TRc)({chainId:s,tokenId:S}),K=F===f,{dependentField:D,noLiquidity:z,parsedAmounts:W,outOfRange:V,invalidRange:Y,price:B,pricesAtTicks:O,ticksAtLimit:H,ticks:$,depositADisabled:Z,depositBDisabled:X,invalidPool:G,position:Q,isInitialLoading:J}=(0,L.mg)({chainId:s,account:f,token0:j,token1:N,baseToken:j,feeAmount:b,existingPosition:T}),ee={[_]:E,[D]:null!==(i=null===(t=W[D])||void 0===t?void 0:t.toSignificant(6))&&void 0!==i?i:""},et=(0,r.useCallback)(e=>{A(e,z),q&&q(e,"a")},[z,q,A]),ei=(0,r.useCallback)(e=>{M(e,z),q&&q(e,"b")},[z,q,M]),en=(0,r.useMemo)(()=>{let e=[];return Z||e.push(W[v.gN.CURRENCY_A]),X||e.push(W[v.gN.CURRENCY_B]),e},[Z,X,W]),{[v.Mb.LOWER]:el,[v.Mb.UPPER]:er}=$,ea=(0,n.jsxs)("div",{className:d()("flex flex-col gap-4"),children:[!T||K||U?null:(0,n.jsxs)(c.v,{size:"sm",variant:"destructive",children:["You are not the owner of this LP position. You will not be able to withdraw the liquidity from this position unless you own the following address: ",F]}),V?(0,n.jsx)(c.v,{size:"sm",variant:"warning",children:"Your position will not earn fees or be used in trades until the market price moves into your range."}):null,Y?(0,n.jsx)(c.v,{size:"sm",variant:"warning",children:"Invalid range selected. The minimum price must be lower than the maximum price."}):null,(0,n.jsxs)("div",{className:d()(!J&&!U&&(void 0===el||void 0===er||G||Y)?"opacity-40 pointer-events-none":"","flex flex-col gap-4"),children:[(0,n.jsxs)("div",{className:"relative",children:[Z&&!X?(0,n.jsx)("div",{className:"bg-gray-200 dark:bg-slate-800 absolute inset-0 z-[1] rounded-xl flex items-center justify-center",children:(0,n.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 px-10 text-sm font-medium text-center",children:[(0,n.jsx)(a,{width:24,height:24,className:"text-gray-400 dark:text-slate-400 text-slate-600"}),(0,n.jsxs)("span",{className:"dark:text-slate-400 text-slate-600",children:["The market price is outside your specified price range. Single-asset deposit only."," ",(0,n.jsx)("a",{href:"https://www.sushi.com/academy",target:"_blank",rel:"noreferrer",className:"text-blue hover:text-blue-600",children:"Learn More"})]})]})}):null,(0,n.jsx)(p.H.Currency,{id:"add-liquidity-token0",type:"INPUT",className:"p-3 bg-white dark:bg-secondary rounded-xl border border-accent",chainId:s,value:ee[v.gN.CURRENCY_A],onChange:et,onSelect:w,currency:j,disabled:Z,loading:C||U||J,allowNative:(0,y.isWNativeSupported)(s)})]}),(0,n.jsx)("div",{className:"flex items-center justify-center mt-[-24px] mb-[-24px] z-10",children:(0,n.jsx)("div",{className:"p-1 bg-white dark:bg-slate-900 border border-accent rounded-full",children:(0,n.jsx)(o.Z,{width:16,height:16,className:"text-muted-foreground"})})}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(l.u,{as:r.Fragment,show:X&&!Z,enter:"transition duration-300 origin-center ease-out",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0",children:(0,n.jsx)("div",{className:"bg-gray-200 dark:bg-slate-800 absolute inset-0 z-[1] rounded-xl flex items-center justify-center",children:(0,n.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 px-10 text-sm font-medium text-center",children:[(0,n.jsx)(a,{width:24,height:24,className:"text-gray-400 dark:text-slate-400 text-slate-600"}),(0,n.jsxs)("span",{className:"dark:text-slate-400 text-slate-600",children:["The market price is outside your specified price range. Single-asset deposit only."," ",(0,n.jsx)("a",{href:"https://www.sushi.com/academy",target:"_blank",rel:"noreferrer",className:"text-blue hover:text-blue-600",children:"Learn More"})]})]})})}),(0,n.jsx)(p.H.Currency,{id:"add-liquidity-token1",type:"INPUT",className:"p-3 bg-white dark:bg-secondary rounded-xl border border-accent",chainId:s,value:ee[v.gN.CURRENCY_B],onChange:ei,onSelect:k,currency:N,loading:C||U||J,disabled:X,allowNative:(0,y.isWNativeSupported)(s)})]}),(0,n.jsx)(g.w1.Connect,{fullWidth:!0,children:(0,n.jsx)(g.w1.Network,{fullWidth:!0,chainId:s,children:(0,n.jsx)(g.w1.Amounts,{fullWidth:!0,chainId:s,amounts:en,children:(0,n.jsx)(g.w1.ApproveERC20,{fullWidth:!0,id:"approve-erc20-0",amount:W[v.gN.CURRENCY_A],contract:(0,h.j4z)(s).address,enabled:!Z,children:(0,n.jsx)(g.w1.ApproveERC20,{fullWidth:!0,id:"approve-erc20-1",amount:W[v.gN.CURRENCY_B],contract:(0,h.j4z)(s).address,enabled:!X,children:(0,n.jsx)(R,{chainId:Number(s),feeAmount:b,token0:j,token1:N,input0:W[v.gN.CURRENCY_A],input1:W[v.gN.CURRENCY_B],position:Q,noLiquidity:z,price:B,pricesAtTicks:O,ticksAtLimit:H,tokenId:S,existingPosition:T,onSuccess:()=>{et(""),ei("")},successLink:I,children:(0,n.jsx)(u.DialogTrigger,{asChild:!0,children:(0,n.jsx)(x.zx,{fullWidth:!0,size:"xl",testId:"add-liquidity-preview",children:"Preview"})})})})})})})})]})]});return P?(0,n.jsx)(m.FormSection,{title:"Liquidity",description:"Depending on your range, the supplied tokens for this position will not always be a 50:50 ratio.",children:ea}):ea}}}]);
//# sourceMappingURL=1282-28158689b042e278.js.map