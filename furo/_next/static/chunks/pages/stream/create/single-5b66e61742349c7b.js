(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{64058:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stream/create/single",function(){return a(66184)}])},54406:function(e,n,a){"use strict";a.d(n,{ck:function(){return t.ck},p2:function(){return p}});var t=a(34546),i=a(97458),r=a(52983);var o=r.forwardRef((function(e,n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n},e),r.createElement("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"}))})),s=a(16275),d=a(89714),l=a(9143),c=a(806),h=a(20678),u=a(99454),m=a(50369),w=a(18188),f=a(13697),v=a(68877),x=a(91824),g=a(33853),b=a(84817),j=a(79388);const p=e=>{let{stream:n,chainId:a}=e;var t,p;const{address:k}=(0,f.mA)(),{data:y}=(0,j.XG)({chainId:a,streamId:n.id,token:n.token}),N=(0,v.x)(a),[I,E]=(0,r.useState)(""),_=(0,r.useMemo)((()=>{if(n.token)return(0,d.eo)(I,n.token)}),[I,n.token]),C=(0,r.useCallback)((async e=>{if(!e||!_)return;const n=(new Date).getTime();(0,w.Yz)({account:k,type:"withdrawStream",txHash:e.hash,chainId:a,timestamp:n,groupTimestamp:n,promise:(0,x.Mn)({hash:e.hash}),summary:{pending:"Withdrawing ".concat(_.toSignificant(6)," ").concat(_.currency.symbol),completed:"Successfully withdrawn ".concat(_.toSignificant(6)," ").concat(_.currency.symbol),failed:"Something went wrong withdrawing from stream"}})}),[_,a,k]),S=(0,r.useMemo)((()=>{if(n&&_&&a&&N)return{account:k,to:N.address,data:(0,b.R)({abi:N.abi,functionName:"withdrawFromStream",args:[BigInt(n.id),_.toShare(n.rebase).quotient,n.recipient.id,!1,"0x"]})}}),[n,_,a,N,k]),{config:W}=(0,f.M5)({...S,chainId:a,enabled:Boolean(!!n&&!!_&&!!a&&!!N)}),{sendTransactionAsync:T,data:B,isLoading:z}=(0,f.pQ)({...W,onSettled:C}),{status:M}=(0,f.BX)({chainId:a,hash:null===(t=B)||void 0===t?void 0:t.hash});return k&&n.canWithdraw(k)?(0,i.jsxs)(h.Tu,{children:[(0,i.jsx)(h.ou,{children:e=>{let{confirm:t}=e;var r,d,w,f,v;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.hg,{asChild:!0,children:(0,i.jsx)(u.zx,{id:"stream-withdraw",icon:o,variant:"secondary",disabled:!n.canWithdraw(k),children:"Withdraw"})}),(0,i.jsxs)(h.cZ,{children:[(0,i.jsxs)(h.fK,{children:[(0,i.jsx)(h.$N,{children:"Withdraw"}),(0,i.jsxs)(h.Be,{children:["You have"," ",(0,i.jsxs)("span",{onClick:()=>{var e;return E(null!==(A=null===(e=y)||void 0===e?void 0:e.toExact())&&void 0!==A?A:"")},onKeyDown:()=>{var e;return E(null!==(R=null===(e=y)||void 0===e?void 0:e.toExact())&&void 0!==R?R:"")},role:"button",className:"font-semibold text-blue",children:[null===(r=y)||void 0===r?void 0:r.toSignificant(6)," ",null===(d=y)||void 0===d?void 0:d.currency.symbol]})," ","available for withdrawal. ",(0,i.jsx)("br",{}),"Any withdrawn amount will be sent to"," ",(0,i.jsx)("a",{target:"_blank",className:"font-semibold text-blue",href:s.Chain.from(n.chainId).getAccountUrl(n.recipient.id),rel:"noreferrer",children:(0,l.Xn)(n.recipient.id)})]})]}),(0,i.jsx)("div",{className:"flex flex-col gap-4",children:(0,i.jsx)(c.nv,{type:"number",placeholder:"Amount","testdata-id":"withdraw-modal-input",value:I,onValueChange:E,unit:null===(w=n.token)||void 0===w?void 0:w.symbol})}),(0,i.jsx)(h.cN,{children:(0,i.jsx)(g.w.Connect,{fullWidth:!0,children:(0,i.jsx)(g.w.Network,{fullWidth:!0,chainId:a,children:(0,i.jsx)(g.w.Guard,{guardWhen:!(null===(f=_)||void 0===f?void 0:f.greaterThan(0)),guardText:"Enter amount",children:(0,i.jsx)(g.w.Guard,{guardWhen:Boolean(n.balance&&(null===(v=_)||void 0===v?void 0:v.greaterThan(n.balance))),guardText:"No available tokens for withdrawal",children:(0,i.jsx)(u.zx,{size:"xl",fullWidth:!0,disabled:z||!n.balance,onClick:()=>{var e;return null===(e=T)||void 0===e?void 0:e().then((()=>t()))},testId:"withdraw-modal-confirmation",children:n.token?z?(0,i.jsx)(m.b,{children:"Confirm Withdraw"}):"Withdraw":"Invalid stream token"})})})})})})]})]})}}),(0,i.jsx)(h.Qf,{chainId:a,status:M,testId:"withdraw-stream-confirmation-modal",successMessage:"Successfully withdrawn from stream",txHash:null===(p=B)||void 0===p?void 0:p.hash})]}):(0,i.jsx)(i.Fragment,{});var A,R}},66184:function(e,n,a){"use strict";a.r(n);var t=a(97458),i=a(27562),r=a(16275),o=a(83860),s=a(13697),d=a(22766),l=a.n(d),c=a(86634),h=(a(52983),a(19801)),u=a(54406);n.default=()=>{var e;const{chain:n}=(0,s.LN)(),a=(null===(e=n)||void 0===e?void 0:e.id)||r.ChainId.ETHEREUM;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.PB,{title:"New Stream"}),(0,t.jsxs)(h.Ar,{children:[(0,t.jsxs)(l(),{className:"group flex gap-4 items-center mb-2",href:{pathname:"/create"},shallow:!0,children:[(0,t.jsx)(o.h,{size:"sm",icon:i.Z,name:"Back"}),(0,t.jsx)("span",{className:"group-hover:opacity-[1] transition-all opacity-0 text-sm font-medium",children:"Go back"})]}),(0,t.jsx)(u.ck,{chainId:a})]})]})}}},function(e){e.O(0,[695,897,546,774,888,179],(function(){return n=64058,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=single-5b66e61742349c7b.js.map